<!-- Global Navigation Component -->
<div class="unified-header">
    <div class="header-left">
        <img src="/src/resources/images/logo/logo5.png" alt="Excelsior Deckbuilder" class="header-logo" onclick="console.log('Main header logo clicked'); event.preventDefault(); event.stopPropagation(); return false;">
    </div>
    <div class="header-center">
        <div class="app-tabs">
            <button class="app-tab-button" id="databaseViewBtn" onclick="switchToDatabaseView()">Card Database</button>
            <button class="app-tab-button active" id="deckBuilderBtn" onclick="switchToDeckBuilder()">Deck Builder</button>
        </div>
    </div>
    <div class="header-right">
        <!-- Compatibility: legacy userWelcome span for older tests -->
        <span id="userWelcome" style="display:none">Welcome, <span id="currentUsernameHidden"></span>!</span>

        <!-- Create Deck Button in Global Nav -->
        <button id="newDeckBtn" class="new-deck-btn" onclick="createNewDeck()">+ Deck</button>
        
        <div id="userMenu" class="user-menu">
            <button id="userMenuToggle" class="user-menu-toggle" onclick="toggleUserMenu(event)">
                <span id="currentUserGreeting">Welcome, <span id="currentUsername"></span>!</span>
                <span class="triangle-icon">â–¶</span>
            </button>
            <div id="userMenuDropdown" class="user-menu-dropdown">
                <!-- Items injected by JS based on role -->
            </div>
        </div>
        <!-- Hidden hooks for existing behaviors -->
        <div class="create-user-container" id="createUserContainer" style="display: none;">
            <div class="create-user-dropdown" id="createUserDropdown">
                <form id="createUserForm" onsubmit="createUser(event)">
                    <div class="form-group">
                        <label for="newUsername">Username:</label>
                        <input type="text" id="newUsername" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="newPassword">Password:</label>
                        <input type="password" id="newPassword" name="password" required>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="save-btn">Save</button>
                        <button type="button" class="cancel-btn" onclick="closeCreateUserDropdown()">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
        <!-- Change Password dropdown (hidden by default) -->
        <div class="create-user-container" id="changePasswordContainer" style="display: none;">
            <div class="create-user-dropdown" id="changePasswordDropdown">
                <form id="changePasswordForm" onsubmit="changePassword(event)">
                    <div class="form-group">
                        <label for="newPasswordField">New Password:</label>
                        <input type="password" id="newPasswordField" name="newPassword" required autocomplete="new-password">
                    </div>
                    <div class="form-group">
                        <label for="confirmPasswordField">Confirm Password:</label>
                        <input type="password" id="confirmPasswordField" name="confirmPassword" required autocomplete="new-password">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="save-btn">Save</button>
                        <button type="button" class="cancel-btn" onclick="closeChangePasswordDropdown()">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
            <!-- Compatibility: legacy Create Deck button hook for tests -->
            <button id="createDeckBtn" class="create-deck-btn" onclick="createNewDeck()" style="display:none">+ Create Deck</button>
                <button id="logoutBtn" class="logout-btn" style="display:none">Log Out</button>
    </div>
</div>
